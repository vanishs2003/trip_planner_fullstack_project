import { GoogleGenerativeAI } from "@google/generative-ai"
  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
    systemInstruction: "AI",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "AI Trip Planner\n\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, I'm ready to help you plan a trip! To give you the best recommendations, I need some more information. Let's start with the basics:\n\n**1. Destination:**\n\n*   **Where do you want to go?**  (City, country, region, or even just a general idea like \"beach vacation\" or \"mountain getaway\")\n*   **Do you have specific cities, landmarks, or activities in mind?**\n\n**2. Travel Dates:**\n\n*   **When are you planning to travel?** (Month, specific dates, or a range)\n*   **How long will your trip be?** (Number of days/nights)\n*   **Are your dates flexible?**\n\n**3. Travelers:**\n\n*   **How many people are traveling?**\n*   **Who is traveling?** (Adults, children, seniors, etc.  This helps determine the types of activities you might enjoy)\n*   **What are the ages of any children?**\n\n**4. Budget:**\n\n*   **What is your approximate budget for this trip?** (This can be a range or per person, if you prefer)\n*   **What are your priorities in terms of spending?** (e.g., luxury accommodations, budget-friendly options, food experiences, activities, etc.)\n\n**5. Travel Style & Preferences:**\n\n*   **What kind of trip are you looking for?** (Relaxing, adventurous, cultural, historical, foodie, romantic, family-friendly, etc.)\n*   **What are your interests and hobbies?** (Hiking, museums, shopping, nightlife, historical sites, water sports, etc.)\n*   **What's your preferred pace of travel?** (Slow and relaxed or action-packed)\n*   **What kind of accommodation are you looking for?** (Hotel, hostel, Airbnb, resort, etc.)\n*   **How do you prefer to get around?** (Rental car, public transportation, walking, taxis, ride-sharing services)\n*   **Are there any specific dietary restrictions or preferences?** (Vegetarian, vegan, gluten-free, etc.)\n*   **Any accessibility needs?** (Wheelchair accessible, etc.)\n*   **Do you have any preferred airlines?**\n*   **Do you have any passport or visa requirements to consider?**\n*   **Do you have any travel insurance preferences?**\n\n**Once I have this information, I can help you with:**\n\n*   **Destination Ideas:** If you don't have a specific place in mind, I can suggest options based on your interests.\n*   **Itinerary Creation:** A detailed daily schedule of activities and sightseeing.\n*   **Transportation:** Information on flights, trains, buses, car rentals, etc.\n*   **Accommodation Recommendations:** Options that fit your budget and preferences.\n*   **Activity and Attraction Recommendations:** Must-see spots and things to do in your chosen destination.\n*   **Restaurant Recommendations:** Places to eat based on your tastes.\n*   **Budgeting Advice:** Help with allocating your travel funds.\n*   **Packing List Ideas**\n*   **Helpful tips and information**\n\n**Let's get started! Please tell me as much as you can about your dream trip.**\n"},
          ],
        },
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget , Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here is a possible travel plan for a 3-day trip to Las Vegas for a couple on a budget, presented in JSON format. Please note that prices are estimates and can vary significantly depending on the time of year, booking platform, and specific promotions. I'll do my best to keep the estimates low for your budget. I'll also provide URLs for images that may not show correctly inline, but you can copy/paste into your browser.\n\n```json\n{\n  \"tripDetails\": {\n    \"destination\": \"Las Vegas, Nevada\",\n    \"duration\": \"3 Days\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Cheap\",\n    \"currency\": \"USD\"\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n       \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": 45,\n       \"hotelImageUrl\": \"https://media.cntraveler.com/photos/5c51b51015f956517d811550/master/w_1600%2Cc_limit/Circus-Circus-Las-Vegas-Hotel-Exterior-GettyImages-163004679.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1283,\n        \"longitude\": -115.1657\n      },\n       \"rating\": 3.5,\n      \"description\": \"A classic Las Vegas hotel known for its affordability and circus-themed attractions. Features an indoor amusement park, various dining options, and a casino.\"\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": 55,\n      \"hotelImageUrl\": \"https://www.vegas.com/wp-content/uploads/2018/03/excalibur-hotel-exterior-400x290.jpg\",\n       \"geoCoordinates\": {\n        \"latitude\": 36.0986,\n        \"longitude\": -115.1735\n      },\n      \"rating\": 4.0,\n      \"description\": \"A medieval-themed hotel with a family-friendly atmosphere, featuring a castle-like design, shows, dining, and a casino.\"\n    },\n    {\n       \"hotelName\": \"Luxor Hotel and Casino\",\n       \"hotelAddress\": \"3900 S Las Vegas Blvd, Las Vegas, NV 89119\",\n       \"price\": 60,\n        \"hotelImageUrl\": \"https://media.cntraveler.com/photos/5b4518153c4b85645864f557/master/w_1600%2Cc_limit/Luxor-Las-Vegas-Hotel-Exterior-GettyImages-168293517.jpg\",\n       \"geoCoordinates\": {\n         \"latitude\": 36.0954,\n         \"longitude\": -115.1733\n        },\n       \"rating\": 4.1,\n      \"description\": \"An Egyptian-themed pyramid-shaped hotel offering various entertainment options, dining, and a casino.\"\n    }\n  ],\n  \"itinerary\": {\n     \"day1\": {\n      \"theme\": \"Exploring the Strip on a Budget\",\n      \"bestTimeToVisit\": \"Evening for the sights, afternoon for some quieter spots.\",\n      \"places\": [\n          {\n              \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n              \"placeDetails\": \"Iconic sign for a photo opportunity. It's free to visit and a must-see for any trip to Vegas.\",\n              \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/Welcome_to_Las_Vegas_sign.jpg/800px-Welcome_to_Las_Vegas_sign.jpg\",\n              \"geoCoordinates\": {\n                \"latitude\": 36.0828,\n                \"longitude\": -115.1726\n              },\n              \"ticketPricing\": \"Free\",\n              \"rating\": 4.5,\n              \"travelTime\": \"10-15 minutes from central Strip hotels\"\n            },\n            {\n              \"placeName\": \"Bellagio Conservatory & Botanical Gardens\",\n              \"placeDetails\": \"Beautifully themed indoor gardens that change with the seasons. Free to visit.\",\n              \"placeImageUrl\": \"https://cdn.travelpulse.com/images/934491d7-f582-de11-b469-0014221d968c/630x355\",\n              \"geoCoordinates\": {\n                \"latitude\": 36.1125,\n                \"longitude\": -115.1744\n              },\n               \"ticketPricing\": \"Free\",\n              \"rating\": 4.7,\n              \"travelTime\": \"15 minutes walking from the sign\"\n            },\n          {\n            \"placeName\": \"Fountains of Bellagio\",\n            \"placeDetails\": \"Enjoy a free water show with music and lights. Shows happen every 30 minutes in the afternoon, more frequently in the evening.\",\n              \"placeImageUrl\": \"https://media.cntraveler.com/photos/5c51be9b9e460773c663a202/master/w_1600%2Cc_limit/Bellagio-Fountains-GettyImages-157957646.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 36.1129,\n              \"longitude\": -115.1737\n            },\n              \"ticketPricing\": \"Free\",\n             \"rating\": 4.8,\n             \"travelTime\": \"Right in front of the conservatory\"\n          },\n          {\n              \"placeName\": \"The LINQ Promenade\",\n            \"placeDetails\": \"Open-air shopping, dining, and entertainment district. Stroll and soak in the atmosphere.\",\n            \"placeImageUrl\": \"https://www.vegas.com/wp-content/uploads/2018/04/linq-promenade-670x370.jpg\",\n             \"geoCoordinates\": {\n              \"latitude\": 36.1167,\n                \"longitude\": -115.1708\n              },\n            \"ticketPricing\": \"Free to enter, costs for attractions/dining\",\n             \"rating\": 4.4,\n              \"travelTime\": \"10 minutes walking from Bellagio\"\n          }\n\n        ]\n    },\n     \"day2\": {\n      \"theme\": \"Downtown and Fremont Street Experience\",\n      \"bestTimeToVisit\": \"Evening for the Fremont Street light show, daytime for museums.\",\n      \"places\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n            \"placeDetails\": \"A pedestrian mall with a massive LED canopy overhead displaying dazzling light shows, especially after dark. Live music and street performers are common.\",\n            \"placeImageUrl\": \"https://www.vegas.com/wp-content/uploads/2018/03/fremont-street-experience-400x290.jpg\",\n             \"geoCoordinates\": {\n             \"latitude\": 36.1708,\n                \"longitude\": -115.1400\n           },\n          \"ticketPricing\": \"Free\",\n            \"rating\": 4.6,\n            \"travelTime\": \"30-40 minutes drive from the Strip\"\n         },\n          {\n              \"placeName\": \"The Mob Museum\",\n              \"placeDetails\": \"Engaging and informative museum covering the history of organized crime in the US. A great option for some indoor sightseeing.\",\n                \"placeImageUrl\": \"https://media.cntraveler.com/photos/5c51b32364a66523376963b5/master/w_1600%2Cc_limit/Mob-Museum-Las-Vegas-GettyImages-81759317.jpg\",\n               \"geoCoordinates\": {\n              \"latitude\": 36.1701,\n              \"longitude\": -115.1412\n              },\n              \"ticketPricing\": \"29.95 USD\",\n                \"rating\": 4.5,\n             \"travelTime\": \"Near Fremont Street Experience\"\n            },\n         {\n           \"placeName\": \"Container Park\",\n            \"placeDetails\": \"Unique shopping, dining, and entertainment area made from shipping containers. Great for a casual meal or browsing.\",\n           \"placeImageUrl\": \"https://www.vegas.com/wp-content/uploads/2018/03/container-park-400x290.jpg\",\n           \"geoCoordinates\": {\n              \"latitude\": 36.1683,\n                \"longitude\": -115.1389\n             },\n           \"ticketPricing\": \"Free to enter, costs for attractions/dining\",\n            \"rating\": 4.3,\n              \"travelTime\": \"Near Fremont Street Experience\"\n          }\n        ]\n    },\n    \"day3\": {\n      \"theme\": \"Nature and Relaxation\",\n      \"bestTimeToVisit\": \"Morning to avoid the heat, afternoon for pool time (if available at your hotel).\",\n       \"places\": [\n          {\n              \"placeName\": \"Red Rock Canyon National Conservation Area\",\n              \"placeDetails\": \"Scenic drives, hiking trails, and beautiful red rock formations. A great getaway from the city.  Be aware of park entry fees and plan accordingly if you want to hike.\",\n               \"placeImageUrl\": \"https://www.nps.gov/redr/planyourvisit/images/RedRockScenicDrive.jpg?maxwidth=1300&maxheight=1300&autorotate=false\",\n               \"geoCoordinates\": {\n                \"latitude\": 36.1383,\n                 \"longitude\": -115.4151\n             },\n              \"ticketPricing\": \"15 USD per vehicle\",\n             \"rating\": 4.7,\n            \"travelTime\": \"25-30 minutes drive from the Strip\"\n         },\n         {\n             \"placeName\": \"The Pool at your Hotel\",\n             \"placeDetails\": \"If your hotel has a pool, take some time to relax and soak up the sun. (check your hotel for availability and hours)\",\n              \"placeImageUrl\": \"https://www.planetware.com/wpimages/2023/04/usa-las-vegas-best-hotel-pools-main-pool-at-aria-resort-casino.jpg\",\n             \"geoCoordinates\":{\n                  \"latitude\": 0,\n                  \"longitude\": 0\n              },\n               \"ticketPricing\":\"Free if you are a guest at the hotel\",\n               \"rating\": 4.0,\n             \"travelTime\": \"At your hotel\"\n           },\n            {\n              \"placeName\": \"High Roller Observation Wheel (Optional)\",\n              \"placeDetails\": \"If you have extra time and want a great view of the city, consider a ride on the High Roller, it is located on the LINQ Promenade. This is an addional cost, so it depends on how much more you want to spend.\",\n             \"placeImageUrl\": \"https://media.cntraveler.com/photos/5a50b0451715d5019a871545/master/w_1600%2Cc_limit/High-Roller-Las-Vegas-GettyImages-821630034.jpg\",\n               \"geoCoordinates\": {\n                \"latitude\": 36.1165,\n                \"longitude\": -115.1695\n            },\n               \"ticketPricing\": \"From 25 USD per person\",\n              \"rating\": 4.4,\n               \"travelTime\": \"10-15 minutes drive from your hotel\"\n          }\n        ]\n    }\n  }\n}\n```\n\n**Important Notes:**\n\n*   **Transportation:** For this budget trip, consider using ride-sharing or public transportation to get around. Walking is also a great option for the Strip.  If you choose to go to Red Rock Canyon, renting a car may be the most cost effective depending on the number of ride shares you would need.\n*   **Food:** To stay on budget, explore affordable dining options like fast-food chains, food courts, or grocery stores for some meals. Happy hour deals are also a great option.\n*   **Free Activities:** This itinerary focuses on many free attractions to minimize costs.\n*  **Hotel:** The hotel options I have provided are estimates and may not have the lowest prices during your specific travel time.  Please check prices and availability on a booking platform.  I highly suggest checking reviews before booking any hotel as well.\n* **Flexibility:** Be flexible and prepared to adjust plans based on weather or other unexpected factors.\n\nI hope you have a fantastic trip to Las Vegas! Let me know if you have any other questions.\n"},
          ],
        },
      ],
    });
  
  